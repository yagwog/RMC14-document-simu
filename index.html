<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS14 Document Formatter</title>
    <style>
        /* General page styles */
        body {
            display: flex;
            flex-direction: row;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
        }

        /* Toolbar styles */
        #toolbar {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 10px;
            background-color: #eeeeee;
            border-right: 1px solid #ccc;
            width: 150px;
            box-sizing: border-box;
        }

        /* Editor styles */
        #editor {
            flex: 3;
            padding: 15px;
            white-space: pre-wrap;
            overflow-wrap: break-word;
            font-family: monospace;
            background-color: #ffffff;
            border-right: 1px solid #ccc;
            height: 100vh;
            box-sizing: border-box;
            resize: none;
        }

        /* Render container and wrapper styles */
        #render-container {
            display: flex;
            flex-direction: row;
            flex: 3;
            align-items: flex-start;
            padding: 20px;
            box-sizing: border-box;
        }

        #render-wrapper {
            display: inline-block;
        }

        #render {
            width: 540px; /* Fixed width for the render area */
            padding: 20px;
            background-color: #fff9e5;
            font-family: 'Noto Sans', Arial, sans-serif;
            white-space: pre-wrap; /* Preserve text wrapping */
            word-wrap: break-word;
            line-height: 1.2;
            overflow-y: auto;
            box-sizing: border-box;
            border-radius: 40px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 1px solid #ddd;
            margin-right: 20px;
        }

        /* Image container styles */
        .image-container {
            width: 300px;
            text-align: center;
        }

        .image-container img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .image-text {
            font-size: 0.9em;
            color: #333;
        }

        /* Color picker styles */
        #color-picker {
            position: absolute;
            top: 100px;
            left: 200px;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 10px;
            z-index: 1000;
            max-width: 300px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            grid-template-columns: repeat(auto-fill, 30px);
            gap: 5px;
        }

        .color-box {
            width: 30px;
            height: 30px;
            cursor: pointer;
            border: 1px solid #aaa;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Header styles */
        .header-1 {
            font-size: 2em;
            font-weight: bold;
            line-height: 0.75; /* Adjusted for consistent spacing */
        }

        .header-2 {
            font-size: 1.5em;
            font-weight: bold;
            line-height: 0.85; /* Adjusted for consistent spacing */
        }

        .header-3 {
            font-size: 1.2em;
            font-weight: bold;
            line-height: 0.95; /* Adjusted for consistent spacing */
        }

        /* Text formatting styles */
        .bold {
            font-weight: bold;
        }

        .italic {
            font-style: italic;
        }

        .bolditalic {
            font-weight: bold;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Toolbar with buttons for formatting -->
    <div id="toolbar">
        <button onclick="insertTag('bold')">Bold</button>
        <button onclick="insertTag('italic')">Italic</button>
        <button onclick="insertTag('bolditalic')">Bold Italic</button>
        <button onclick="insertTag('header-1')">Header 1</button>
        <button onclick="insertTag('header-2')">Header 2</button>
        <button onclick="insertTag('header-3')">Header 3</button>
        <button onclick="toggleColorPicker()">Color Picker</button>
        <button onclick="insertHexColor()">Hex Color</button>
        <button onclick="insertTag('bullet')">Bullet</button>
    </div>

    <!-- Editor for user input -->
    <textarea id="editor" placeholder="Type your formatted document here..."></textarea>

    <!-- Render area for preview -->
    <div id="render-container">
        <div id="render-wrapper">
            <div id="render"></div>
        </div>
        <div class="image-container">
            <p class="image-text">This isn't a 1-2-1 representation yet, block art displays a bit odd next to headers, and underscores display a bit too long.</p>
            <img src="https://files.catbox.moe/gws2xt.png" alt="Placeholder Image">
            <p class="image-text">Made with love - Simon / Big Dave<br>Special thanks to the the RMC14 community.</p>
            <p class="image-text">#to-do: Include a feature to select templates from a repo, tune the render better, add a center button</p>
            <p class="image-text">Please give me feedback as well as tips.</p>
        </div>
    </div>

    <!-- Hidden color picker -->
    <div id="color-picker" style="display: none;"></div>

    <script>
        // Define supported named colors
        const namedColors = {
    "Black": "#000000", "DimGray": "#696969", "Gray": "#808080", "DarkGray": "#A9A9A9",
    "Silver": "#C0C0C0", "Gainsboro": "#DCDCDC", "WhiteSmoke": "#F5F5F5", "White": "#FFFFFF",

    "DarkRed": "#8B0000", "FireBrick": "#B22222", "IndianRed": "#CD5C5C",
    "Crimson": "#DC143C", "Red": "#FF0000", "Tomato": "#FF6347", "OrangeRed": "#FF4500",
    "DarkOrange": "#FF8C00", "Coral": "#FF7F50", "LightCoral": "#F08080",

    "Chocolate": "#D2691E", "SaddleBrown": "#8B4513", "Sienna": "#A0522D",
    "Brown": "#A52A2A", "RosyBrown": "#BC8F8F", "Peru": "#CD853F", "SandyBrown": "#F4A460",
    "GoldenRod": "#DAA520", "DarkGoldenRod": "#B8860B", "Gold": "#FFD700", "Yellow": "#FFFF00",

    "Khaki": "#F0E68C", "DarkKhaki": "#BDB76B", "PaleGoldenRod": "#EEE8AA",
    "LightGoldenRodYellow": "#FAFAD2", "LemonChiffon": "#FFFACD", "LightYellow": "#FFFFE0",

    "Olive": "#808000", "DarkOliveGreen": "#556B2F", "OliveDrab": "#6B8E23",
    "DarkGreen": "#006400", "Green": "#008000", "ForestGreen": "#228B22",
    "SeaGreen": "#2E8B57", "MediumSeaGreen": "#3CB371", "LightSeaGreen": "#20B2AA",
    "SpringGreen": "#00FF7F", "LawnGreen": "#7CFC00", "Chartreuse": "#7FFF00",
    "GreenYellow": "#ADFF2F", "LimeGreen": "#32CD32", "Lime": "#00FF00",
    "PaleGreen": "#98FB98", "LightGreen": "#90EE90", "MediumSpringGreen": "#00FA9A",

    "Teal": "#008080", "DarkCyan": "#008B8B", "MediumTurquoise": "#48D1CC",
    "Turquoise": "#40E0D0", "LightSeaGreen": "#20B2AA", "DarkTurquoise": "#00CED1",
    "Aqua": "#00FFFF", "Cyan": "#00FFFF", "Aquamarine": "#7FFFD4",
    "PaleTurquoise": "#AFEEEE", "PowderBlue": "#B0E0E6", "LightBlue": "#ADD8E6",
    "SkyBlue": "#87CEEB", "DeepSkyBlue": "#00BFFF", "DodgerBlue": "#1E90FF",
    "CornflowerBlue": "#6495ED", "SteelBlue": "#4682B4", "RoyalBlue": "#4169E1",
    "Blue": "#0000FF", "MediumBlue": "#0000CD", "DarkBlue": "#00008B",
    "Navy": "#000080", "MidnightBlue": "#191970",

    "Indigo": "#4B0082", "DarkSlateBlue": "#483D8B", "SlateBlue": "#6A5ACD",
    "MediumSlateBlue": "#7B68EE", "MediumPurple": "#9370DB", "BlueViolet": "#8A2BE2",
    "DarkViolet": "#9400D3", "DarkOrchid": "#9932CC", "MediumOrchid": "#BA55D3",
    "Purple": "#800080", "RebeccaPurple": "#663399", "Fuchsia": "#FF00FF",
    "Magenta": "#FF00FF", "Orchid": "#DA70D6", "Violet": "#EE82EE",
    "Plum": "#DDA0DD", "Thistle": "#D8BFD8", "Lavender": "#E6E6FA",

    "PeachPuff": "#FFDAB9", "Moccasin": "#FFE4B5", "NavajoWhite": "#FFDEAD",
    "Bisque": "#FFE4C4", "BlanchedAlmond": "#FFEBCD", "Cornsilk": "#FFF8DC",
    "PapayaWhip": "#FFEFD5", "AntiqueWhite": "#FAEBD7", "FloralWhite": "#FFFAF0",
    "Ivory": "#FFFFF0", "Beige": "#F5F5DC", "Linen": "#FAF0E6",
    "OldLace": "#FDF5E6", "WhiteSmoke": "#F5F5F5", "GhostWhite": "#F8F8FF",
    "AliceBlue": "#F0F8FF",
};

        // Initialize the color picker
        function initializeColorPicker() {
            const picker = document.getElementById('color-picker');
            picker.innerHTML = '';
            for (const [name, hex] of Object.entries(namedColors)) {
                const box = document.createElement('div');
                box.className = 'color-box';
                box.style.backgroundColor = hex;
                box.title = name;
                box.onclick = () => insertColor(name);
                picker.appendChild(box);
            }
        }

        // Toggle color picker visibility
        function toggleColorPicker() {
            const picker = document.getElementById('color-picker');
            picker.style.display = picker.style.display === 'none' ? 'grid' : 'none';
        }

        // Insert a color tag
        function insertColor(colorName) {
            const editor = document.getElementById('editor');
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const selectedText = editor.value.substring(start, end);

            const before = editor.value.substring(0, start);
            const after = editor.value.substring(end);

            editor.value = `${before}[color=${colorName}]${selectedText}[/color]${after}`;
            document.getElementById('color-picker').style.display = 'none';
        }

        // Insert a hex color tag
        function insertHexColor() {
            const hexColor = prompt("Enter a hex color code (e.g., #FF5733):");
            if (hexColor && /^#[0-9A-Fa-f]{3,8}$/.test(hexColor)) {
                insertColor(hexColor);
            } else {
                alert("Invalid hex code! Use formats like #RGB, #RRGGBB, #RGBA, or #RRGGBBAA.");
            }
        }

        // Insert a formatting tag
        function insertTag(tag) {
            const editor = document.getElementById('editor');
            const start = editor.selectionStart;
            const end = editor.selectionEnd;
            const selectedText = editor.value.substring(start, end);

            let openTag = '', closeTag = '';

            switch (tag) {
                case 'bold':
                    openTag = '[bold]';
                    closeTag = '[/bold]';
                    break;
                case 'italic':
                    openTag = '[italic]';
                    closeTag = '[/italic]';
                    break;
                case 'bolditalic':
                    openTag = '[bolditalic]';
                    closeTag = '[/bolditalic]';
                    break;
                case 'header-1':
                    openTag = '[head=1]';
                    closeTag = '[/head]';
                    break;
                case 'header-2':
                    openTag = '[head=2]';
                    closeTag = '[/head]';
                    break;
                case 'header-3':
                    openTag = '[head=3]';
                    closeTag = '[/head]';
                    break;
            }

            const before = editor.value.substring(0, start);
            const after = editor.value.substring(end);

            editor.value = before + openTag + selectedText + closeTag + after;
        }

        // Live rendering of content
        document.getElementById('editor').addEventListener('input', () => {
            const editorContent = document.getElementById('editor').value;
            const renderDiv = document.getElementById('render');
            renderDiv.innerHTML = editorContent
                .replace(/\[bold\](.*?)\[\/bold\]/gs, '<span class="bold">$1</span>') // Bold text
                .replace(/\[italic\](.*?)\[\/italic\]/gs, '<span class="italic">$1</span>') // Italic text
                .replace(/\[bolditalic\](.*?)\[\/bolditalic\]/gs, '<span class="bolditalic">$1</span>') // Bold Italic text
                .replace(/\[head=1\](.*?)\[\/head\]/gs, '<span class="header-1">$1</span>') // Header 1
                .replace(/\[head=2\](.*?)\[\/head\]/gs, '<span class="header-2">$1</span>') // Header 2
                .replace(/\[head=3\](.*?)\[\/head\]/gs, '<span class="header-3">$1</span>') // Header 3
                .replace(/\[bullet\/\]/gs, 'â€¢ ') // Bullet point
                .replace(/\[color=([a-zA-Z]+)\](.*?)\[\/color\]/gs, (_, color, text) => {
                    const hex = namedColors[color] || color; // Handle named colors or hex
                    return `<span style="color:${hex}">${text}</span>`;
                })
                .replace(/\[color=#([0-9A-Fa-f]{3,8})\](.*?)\[\/color\]/gs, '<span style="color:#$1">$2</span>'); // Hex colors
        });

        // Initialize the color picker on page load
        initializeColorPicker();
    </script>
</body>
</html>
