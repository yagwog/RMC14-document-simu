<!DOCTYPE html>
<html lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SS14 Document Formatter</title>
    <style>
        /* General page styles */
        body {
            display: flex;
            flex-direction: row;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            height: 100vh;
        }
        
/* Normal text should be in Noto Sans */
.normal-text {
    font-family: 'Noto Sans', Arial, sans-serif;
    line-height: 1.2;
    letter-spacing: 0.05em;
    display: inline; /*  Ensure inline behavior */
}

/* Box-drawing and ASCII characters */
.ascii-art {
    font-family: "Courier New", Consolas, monospace !important;
    font-size: 1em;
    white-space: pre;
    word-wrap: normal;
    display: inline-block; /*  Ensures characters align properly */
}

/* Monospace only inside [mono] */
.monospace {
    font-family: "Courier New", Consolas, monospace !important; /*  Ensures only inside [mono] */
    font-variant-ligatures: none;
    font-variant-numeric: tabular-nums;
    letter-spacing: 0.05em;
    white-space: pre-wrap;
    word-wrap: break-word;
    font-weight: 500;
    display: inline; /*  Prevent block behavior */
}



        /* Toolbar styles */
        #toolbar {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 10px;
            background-color: #eeeeee;
            border-right: 1px solid #ccc;
            width: 150px;
            box-sizing: border-box;
        }
        
        /* Editor styles */
        #editor {
            flex: 6; /* Increased flex for more width */
            padding: 15px;
            white-space: pre-wrap;
            overflow-wrap: break-word;
            font-family: monospace;
            background-color: #ffffff;
            border-right: 1px solid #ccc;
            height: 100vh;
            box-sizing: border-box;
            resize: none;
        }
        
        /* Render container and wrapper styles */
        #render-container {
            flex: 3; /* Adjusted flex to balance space */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        
        #render-wrapper {
            display: inline-block;
            margin-bottom: 20px;
        }
        
        #render {
        width: 100%; /* Make render fill the available space */
        min-width: 540px;
        max-width: 540px; /* Add a max width for readability */
        padding: 20px;
        background-color: #fff9e5;
        font-family: 'Noto Sans', Arial, sans-serif; /*  Revert to normal font */
        white-space: pre-wrap; /*  Keeps text formatting */
        word-wrap: break-word;
        line-height: 1.2;
        overflow-x: auto; /*  Prevents cut-off */
        overflow-y: auto;

        box-sizing: border-box;
        border-radius: 40px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border: 1px solid #ddd;
        color: #000;
}

            #color-picker {
        position: absolute;
        top: 100px; /* Adjust as needed */
        left: 200px; /* Adjust as needed */
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        z-index: 1000;
        display: none;
        grid-template-columns: repeat(auto-fill, minmax(30px, 1fr)); /* Creates rows with 30px boxes */
        gap: 5px;
        width: 200px; /* Increase the width */
        max-height: 300px; /* Adjust max height */
        overflow-y: auto; /* Scrollable if needed */
    }

        .color-box {
            width: 30px;
            height: 30px;
            cursor: pointer;
            border: 1px solid #aaa;
            border-radius: 5px; /* Rounded corners for a modern look */
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* Subtle shadow */
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .color-box:hover {
            transform: scale(1.1); /* Enlarge slightly on hover */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Stronger shadow on hover */
        }
        
        .bold {
        font-weight: bold;
    }

    .italic {
        font-style: italic;
    }

    .bolditalic {
        font-weight: bold;
        font-style: italic;
    }

        .header-1 {
        font-size: 2em;
        font-weight: bold;
        display: inline; /* Ensure inline behavior */
        line-height: 0.9;
    }

    .header-2 {
        font-size: 1.5em;
        font-weight: bold;
        display: inline;
        line-height: 0.8;
    }

    .header-3 {
        font-size: 1.2em;
        font-weight: bold;
        display: inline;
        line-height: 0.7;
    }



        /* Image container now positioned below render */
        .image-container {
            width: 100%; /* Match render width */
            max-width: 540px;
            text-align: center;
            margin-top: 20px; /* Add spacing */
        }
        
        .image-container img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        
        .image-text {
            font-size: 0.9em;
            color: #333;
        }
        
        /* Modern flat button styles */
        button {
            background-color: #f5f5f5; /* Flat color */
            border: 1px solid #ccc; /* Subtle border */
            color: #333; /* Dark text for readability */
            font-size: 14px;
            font-weight: bold;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: none; /* Flat, no shadow */
        }
        
        button:hover {
            background-color: #e0e0e0; /* Slightly darker on hover */
            color: #000; /* Darker text for hover */
        }
        
        body.dark-mode button {
            background-color: #444444; /* Flat dark color */
            border: 1px solid #555555; /* Subtle dark border */
            color: #ffffff; /* Light text for readability */
        }
        
        body.dark-mode button:hover {
            background-color: #555555; /* Slightly lighter on hover */
            color: #ffffff;
        }
        
        /* Adjustments for dark mode */
        body.dark-mode {
            background-color: #1e1e1e;
            color: #ffffff;
        }
        
        body.dark-mode #toolbar {
            background-color: #333333;
            color: #ffffff;
            border-right: 1px solid #555555;
        }
        
        body.dark-mode #editor {
            background-color: #2d2d2d;
            color: #ffffff;
            border-right: 1px solid #555555;
        }
        
        body.dark-mode #render {
            background-color: #fff9e5; /* Original background */
            color: inherit;
        }
        
        body.dark-mode .image-text {
            color: #ffffff;
        }
        </style>
    
    <script src="logic.js"></script>  
    
</head>
<body>
    <!-- Toolbar with buttons for formatting -->
    <div id="toolbar">
        <button onclick="insertTag('bold')">Bold</button>
        <button onclick="insertTag('italic')">Italic</button>
        <button onclick="insertTag('bolditalic')">Bold Italic</button>
        <button onclick="insertTag('mono')">Monospace</button>
        <button onclick="insertTag('header-1')">Header 1</button>
        <button onclick="insertTag('header-2')">Header 2</button>
        <button onclick="insertTag('header-3')">Header 3</button>
        <button onclick="toggleColorPicker()">Color Picker</button>
        <button onclick="insertHexColor()">Hex Color</button>
        <button onclick="insertTag('bullet')">Bullet</button>
        <button onclick="centerText()">Center Text</button>
        <button onclick="document.getElementById('file-input').click()">Import .txt</button>
        <input type="file" id="file-input" accept=".txt" style="display: none;" />
        <button onclick="saveTextAsFile()">Save as .txt</button>
        <button onclick="saveRenderAsImage()">Save as Image</button>
        <button onclick="toggleDarkMode()">Toggle Dark Mode</button>

    </div>

    <!-- Editor for user input -->
    <textarea id="editor" placeholder="Type here and watch with amazement as it's rendered in the render area..."></textarea>

    <!-- Render area -->
    <div id="render-container">
        <div id="render-wrapper">
            <div id="render"></div>
        </div>

        <!-- Content below render -->
        <div class="image-container">
            <p class="image-text">v6.</p>
            <img src="https://files.catbox.moe/gws2xt.png" alt="Placeholder Image">
            <p class="image-text">Made with love - Simon / Big Dave / Fred Blehurst<br>Special thanks to the the RMC14 community, support their project, the game is fun too!.</p>
            <p class="image-text">#v6 changes: General Fixes to tags, you can now roll/nest tags successfully and they *hopfully* will behave like they do in game "eg: [head=1]head1 [head=2]head2[/head]head1[/head]nothead"</p>
            <p class="image-text"> Fixed brackets not displaying correctly within Bold
            <p class="image-text">   Added monospace, the font is wrong for it while i figure out how to balance text and some specific types of ascii art</p>
            <p class="image-text">  Completely rewrote the render output</p>
            <p class="image-text"> Wrote framework for templates for headers but haven't introduced it into this code yet</p>
            <p class="image-text"> Added a feature to copy a photo of the render output</p>
            <p class="image-text">Todo: Implement header templating, figure out how to format the rest of the git repo, slightly nicer ui, somehow understand the black magic of the scroll bar in game, fix monospacing, add entry fields</p>
            <p class="image-text">Please give me feedback as well as tips.</p>
        </div>
    </div>

    <!-- Hidden color picker -->
    <div id="color-picker" style="display: none; position: absolute;"></div>
</body>
</html>
